import{a as P}from"./chunk-3E2XEZQ5.js";import{a as A}from"./chunk-KACECMBE.js";import{a as T}from"./chunk-VR3MZZWK.js";import{a as N}from"./chunk-ZH3L7T54.js";import{l as k,o as d}from"./chunk-MLHW3EEE.js";import{$ as M,Ba as s,Ca as w,Oa as v,Ra as c,S as g,Ta as o,Ua as n,Ub as I,Va as x,Vb as $,Wa as D,Xa as S,Ya as f,Zb as p,aa as m,db as r,e as j,eb as L,ha as y,ia as h,lb as E,nb as O}from"./chunk-5XN3BUNB.js";var l=j(A());var R=t=>["/updateCategory",t];function V(t,i){t&1&&(o(0,"div",9)(1,"div",10)(2,"span",11),r(3,"Loading..."),n()()())}function U(t,i){t&1&&(o(0,"div",12),r(1," No categories found. "),n())}function Y(t,i){if(t&1){let e=D();o(0,"tr")(1,"td"),r(2),n(),o(3,"td"),r(4),n(),o(5,"td")(6,"button",15),S("click",function(){let C=y(e).$implicit,_=f(2);return h(_.onDetails(C._id))}),r(7,"Details"),n(),o(8,"button",16),r(9,"Update"),n(),o(10,"button",17),S("click",function(){let C=y(e).$implicit,_=f(2);return h(_.onDelete(C._id))}),r(11,"Delete"),n()()()}if(t&2){let e=i.$implicit;s(2),L(e._id),s(2),L(e.name),s(4),c("routerLink",O(3,R,e._id))}}function q(t,i){if(t&1&&(o(0,"table",13)(1,"thead")(2,"tr")(3,"th"),r(4,"ID"),n(),o(5,"th"),r(6,"Name"),n(),o(7,"th"),r(8,"Actions"),n()()(),o(9,"tbody"),v(10,Y,12,5,"tr",14),n()()),t&2){let e=f();s(10),c("ngForOf",e.categories)}}var u=class t{constructor(i){this.categoryService=i}categories=[];getCategories$=null;deleteCategory$=null;getCategoryDetails$=null;isLoading=!1;ngOnInit(){this.getCategories()}ngOnDestroy(){this.getCategories$&&this.getCategories$.unsubscribe(),this.deleteCategory$&&this.deleteCategory$.unsubscribe(),this.getCategoryDetails$&&this.getCategoryDetails$.unsubscribe()}getCategories(){this.isLoading=!0,this.getCategories$=this.categoryService.getCategories().subscribe({next:i=>{this.categories=i,this.isLoading=!1},error:i=>{console.error("Error fetching categories",i),this.isLoading=!1}})}onDelete(i){l.default.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#d33",cancelButtonColor:"#3085d6",confirmButtonText:"Yes, delete it!"}).then(e=>{e.isConfirmed&&this.categoryService.deleteCategory(i).subscribe({next:()=>{l.default.fire("Deleted!","The category has been deleted.","success").then(()=>{this.getCategories()})},error:a=>{l.default.fire("Error!","There was an issue deleting the category. This could happen if the category is being used by a product!","error"),console.error("Error deleting category",a)}})})}onDetails(i){this.getCategoryDetails$=this.categoryService.getCategoryById(i).subscribe({next:e=>{l.default.fire({title:"<strong>Category Details</strong>",html:`
              <div style="text-align: left;">
                <b>Name:</b> ${e.name} <br>
                <b>Created At:</b> ${new Date(e.createdAt).toLocaleString()} <br>
                <b>Updated At:</b> ${new Date(e.updatedAt).toLocaleString()} <br>
              </div>
            `,icon:"info",confirmButtonText:"Close"})},error:e=>{l.default.fire("Error!","Unable to fetch category details.","error"),console.error("Error fetching category details",e)}})}static \u0275fac=function(e){return new(e||t)(w(P))};static \u0275cmp=M({type:t,selectors:[["app-list-categories"]],standalone:!0,features:[E],decls:15,vars:3,consts:[[1,"container-fluid","p-0"],[1,"row","no-gutters"],[1,"col-12"],[1,"col-2"],[1,"col-10",2,"margin-top","70px"],["id","createBtn","routerLink","/addCategory",1,"btn","btn-success","mb-3"],["class","d-flex justify-content-center",4,"ngIf"],["class","alert alert-warning","role","alert",4,"ngIf"],["class","table table-striped",4,"ngIf"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","text-success"],[1,"visually-hidden"],["role","alert",1,"alert","alert-warning"],[1,"table","table-striped"],[4,"ngFor","ngForOf"],[1,"btn","btn-info","btn-sm",3,"click"],[1,"btn","btn-warning","btn-sm",3,"routerLink"],[1,"btn","btn-danger","btn-sm",3,"click"]],template:function(e,a){e&1&&(o(0,"div",0)(1,"div",1)(2,"div",2),x(3,"app-navbar"),n()(),o(4,"div",1)(5,"div",3),x(6,"app-admin-sidebar"),n(),o(7,"div",4)(8,"h2"),r(9,"Categories List"),n(),o(10,"button",5),r(11,"Create New Category"),n(),v(12,V,4,0,"div",6)(13,U,2,0,"div",7)(14,q,11,1,"table",8),n()()()),e&2&&(s(12),c("ngIf",a.isLoading),s(),c("ngIf",!a.isLoading&&a.categories.length===0),s(),c("ngIf",!a.isLoading&&a.categories.length>0))},dependencies:[N,T,p,I,$,d,k],styles:[".table[_ngcontent-%COMP%]{width:100%;margin-top:20px}.table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px;text-align:left}.btn-success[_ngcontent-%COMP%]{background-color:#4caf50;border-color:#4caf50;color:#fff}.btn-info[_ngcontent-%COMP%]{background-color:#5bc0de;border-color:#46b8da;color:#fff}.btn-warning[_ngcontent-%COMP%]{background-color:#f0ad4e;border-color:#eea236;color:#fff}.btn-danger[_ngcontent-%COMP%]{background-color:#d9534f;border-color:#d43f3a;color:#fff}.btn[_ngcontent-%COMP%]{margin-right:5px}#createBtn[_ngcontent-%COMP%]{margin-bottom:20px}[_ngcontent-%COMP%]::selection{background-color:#5c615c;color:#fff}"]})};var z=[{path:"",component:u}],b=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=m({type:t});static \u0275inj=g({imports:[d.forChild(z),d]})};var B=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=m({type:t});static \u0275inj=g({imports:[p,b]})};export{B as ListCategoriesModule};
