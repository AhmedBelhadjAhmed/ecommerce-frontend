import{a as N,b as h,c as E,d as j,f as D,h as O,i as G,o as L,q as A}from"./chunk-WMSCIBPS.js";import{a as k}from"./chunk-HGUX4EP4.js";import{a as T}from"./chunk-ZH3L7T54.js";import{k as F,l as I,o as c}from"./chunk-MLHW3EEE.js";import{$ as P,Ba as a,Ca as g,Oa as d,Ra as l,S as p,Ta as i,Ua as o,Va as v,Vb as M,Xa as S,Ya as b,Zb as w,aa as f,db as s,fb as y,g as C,lb as R}from"./chunk-5XN3BUNB.js";function V(e,n){e&1&&(i(0,"div",17),s(1," Reset token is required. "),o())}function z(e,n){e&1&&(i(0,"div",17),s(1," Password must be at least 6 characters long. "),o())}function H(e,n){if(e&1&&(i(0,"button",18),s(1," Reset Password "),o()),e&2){let t=b();l("disabled",t.resetForm.invalid)}}function J(e,n){e&1&&(i(0,"div",19)(1,"div",20)(2,"span",21),s(3,"Loading..."),o()()())}function K(e,n){if(e&1&&(i(0,"div",22),s(1),o()),e&2){let t=b();a(),y(" ",t.successMessage," ")}}function Q(e,n){if(e&1&&(i(0,"div",23),s(1),o()),e&2){let t=b();a(),y(" ",t.errorMessage," ")}}var x=class e{constructor(n,t,r){this.fb=n;this.authService=t;this.router=r;this.resetForm=this.fb.group({resetToken:["",h.required],newPassword:["",[h.required,h.minLength(6)]]})}resetForm;errorMessage="";successMessage="";loading=!1;subscriptions=new C;onSubmit(){if(this.resetForm.invalid)return;this.loading=!0;let{resetToken:n,newPassword:t}=this.resetForm.value,r=this.authService.resetPassword({resetToken:n,newPassword:t}).subscribe({next:m=>{this.loading=!1,this.successMessage=m.message,setTimeout(()=>{this.router.navigate(["/login"])},3e3)},error:m=>{this.loading=!1,this.errorMessage=m.error.message||"Something went wrong, please try again."}});this.subscriptions.add(r)}ngOnDestroy(){this.subscriptions.unsubscribe()}static \u0275fac=function(t){return new(t||e)(g(L),g(k),g(F))};static \u0275cmp=P({type:e,selectors:[["app-reset-password"]],standalone:!0,features:[R],decls:23,vars:7,consts:[[1,"reset-container","d-flex","justify-content-center","align-items-center","min-vh-100"],[1,"card","p-4",2,"width","100%","max-width","400px"],[1,"text-center","mb-3"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","resetToken"],["id","resetToken","formControlName","resetToken","type","text","placeholder","Enter reset token",1,"form-control"],["class","error",4,"ngIf"],[1,"form-group","mt-3"],["for","newPassword"],["id","newPassword","formControlName","newPassword","type","password","placeholder","Enter new password",1,"form-control"],["type","submit","class","btn btn-primary mt-4 custom-button",3,"disabled",4,"ngIf"],["class","d-flex justify-content-center align-items-center mt-4",4,"ngIf"],["class","alert alert-success mt-3",4,"ngIf"],["class","alert alert-danger mt-3",4,"ngIf"],[1,"text-center","mt-3"],["routerLink","/login",1,"text-muted"],[1,"error"],["type","submit",1,"btn","btn-primary","mt-4","custom-button",3,"disabled"],[1,"d-flex","justify-content-center","align-items-center","mt-4"],["role","status",1,"spinner-border","text-success"],[1,"visually-hidden"],[1,"alert","alert-success","mt-3"],[1,"alert","alert-danger","mt-3"]],template:function(t,r){if(t&1&&(v(0,"app-navbar"),i(1,"div",0)(2,"div",1)(3,"h3",2),s(4,"Reset Password"),o(),i(5,"form",3),S("ngSubmit",function(){return r.onSubmit()}),i(6,"div",4)(7,"label",5),s(8,"Reset Token"),o(),v(9,"input",6),d(10,V,2,0,"div",7),o(),i(11,"div",8)(12,"label",9),s(13,"New Password"),o(),v(14,"input",10),d(15,z,2,0,"div",7),o(),d(16,H,2,1,"button",11)(17,J,4,0,"div",12),o(),d(18,K,2,1,"div",13)(19,Q,2,1,"div",14),i(20,"div",15)(21,"a",16),s(22,"Back to Login"),o()()()()),t&2){let m,u;a(5),l("formGroup",r.resetForm),a(5),l("ngIf",((m=r.resetForm.get("resetToken"))==null?null:m.invalid)&&((m=r.resetForm.get("resetToken"))==null?null:m.touched)),a(5),l("ngIf",((u=r.resetForm.get("newPassword"))==null?null:u.invalid)&&((u=r.resetForm.get("newPassword"))==null?null:u.touched)),a(),l("ngIf",!r.loading),a(),l("ngIf",r.loading),a(),l("ngIf",r.successMessage),a(),l("ngIf",r.errorMessage)}},dependencies:[T,w,M,A,D,N,E,j,O,G,c,I],styles:[".custom-button[_ngcontent-%COMP%]{background-color:#0b9310}.custom-button[_ngcontent-%COMP%]:hover{background-color:#45a049}input[_ngcontent-%COMP%]::selection{background-color:#009024;color:#fff}[_ngcontent-%COMP%]::selection{background-color:#5c615c;color:#fff}"]})};var U=[{path:"",component:x}],_=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=f({type:e});static \u0275inj=p({imports:[c.forChild(U),c]})};var q=class e{static \u0275fac=function(t){return new(t||e)};static \u0275mod=f({type:e});static \u0275inj=p({imports:[w,_]})};export{q as ResetPasswordModule};
