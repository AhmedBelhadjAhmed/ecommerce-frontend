import{a as ee}from"./chunk-Z7JX7RS7.js";import{a as Z}from"./chunk-3E2XEZQ5.js";import{a as U,c as X,e as q,j as H,k as J,l as K,p as Y}from"./chunk-WMSCIBPS.js";import{a as G}from"./chunk-ZH3L7T54.js";import{l as $,o as h}from"./chunk-MLHW3EEE.js";import{$ as T,Ba as a,Ca as w,Oa as f,Ra as l,S as x,Sa as P,Ta as o,Ua as c,Ub as W,Va as M,Vb as L,Wa as _,Xa as m,Xb as z,Ya as d,Za as N,Zb as C,aa as v,cb as A,db as s,eb as b,fb as k,ha as p,hb as E,ia as g,ib as I,jb as V,lb as j,nb as B,ob as D,pb as Q,sb as R,ya as F}from"./chunk-5XN3BUNB.js";var ne=t=>["/ClientDetailsProduct",t];function re(t,i){if(t&1){let e=_();o(0,"li",19),m("click",function(){let n=p(e).$implicit,u=d(2);return g(u.getProductsByCategory(n._id))}),s(1),c()}if(t&2){let e=i.$implicit;a(),k(" ",e.name," ")}}function oe(t,i){if(t&1){let e=_();o(0,"ul",18)(1,"li",19),m("click",function(){p(e);let n=d();return g(n.loadAllProducts())}),s(2,"All Products"),c(),f(3,re,2,1,"li",20),c()}if(t&2){let e=d();a(3),l("ngForOf",e.categories)}}function ce(t,i){t&1&&(o(0,"p"),s(1,"No categories available."),c())}function ae(t,i){if(t&1){let e=_();o(0,"li",23)(1,"a",28),m("click",function(){let n=p(e).$implicit,u=d(2);return g(u.loadPage(n))}),s(2),c()()}if(t&2){let e=i.$implicit,r=d(2);P("active",e===r.currentPage),a(2),b(e)}}function se(t,i){if(t&1){let e=_();o(0,"nav",21)(1,"ul",22)(2,"li",23)(3,"a",24),m("click",function(){p(e);let n=d();return g(n.loadPage(n.currentPage-1))}),o(4,"span",25),s(5,"\xAB"),c()()(),f(6,ae,3,3,"li",26),o(7,"li",23)(8,"a",27),m("click",function(){p(e);let n=d();return g(n.loadPage(n.currentPage+1))}),o(9,"span",25),s(10,"\xBB"),c()()()()()}if(t&2){let e=d();a(2),P("disabled",e.currentPage===1),a(4),l("ngForOf",e.getPageArray()),a(),P("disabled",e.currentPage===e.totalPages)}}function le(t,i){if(t&1&&(o(0,"option",33),s(1),c()),t&2){let e=i.$implicit;l("value",e),a(),b(e)}}function de(t,i){if(t&1){let e=_();o(0,"div",29)(1,"label",30),s(2,"Go to page:"),c(),o(3,"select",31),V("ngModelChange",function(n){p(e);let u=d();return I(u.currentPage,n)||(u.currentPage=n),g(n)}),m("change",function(n){p(e);let u=d();return g(u.onPageSelectChange(n))}),f(4,le,2,2,"option",32),c()()}if(t&2){let e=d();a(3),E("ngModel",e.currentPage),a(),l("ngForOf",e.getPageArray())}}function ue(t,i){t&1&&(o(0,"div",34)(1,"div",35)(2,"span",36),s(3,"Loading..."),c()()())}function pe(t,i){t&1&&(o(0,"div",37)(1,"p",38),s(2,"No products available."),c()())}function ge(t,i){if(t&1&&(o(0,"div",41)(1,"div",42),M(2,"img",43),o(3,"div",44)(4,"h5",45),s(5),c(),o(6,"p",46),s(7),D(8,"currency"),c(),o(9,"p",47),s(10),c(),o(11,"div",48)(12,"button",49)(13,"span",2),s(14,"favorite_border"),c(),s(15," View Details "),c()()()()()),t&2){let e=i.$implicit;a(2),N("alt",e.name),l("src",e.images[0],F),a(3),b(e.name),a(2),k("Price: ",Q(8,6,e.price),""),a(3),b(e.description),a(2),l("routerLink",B(8,ne,e._id))}}function me(t,i){if(t&1&&(o(0,"div",39),f(1,ge,16,10,"div",40),c()),t&2){let e=d();a(),l("ngForOf",e.products)}}var y=class t{constructor(i,e){this.categoryService=i;this.productService=e}categories=[];products=[];totalPages=0;currentPage=1;selectedCategoryId=null;searchQuery="";categorySubscription;productSubscription;loading=!1;isSidebarOpen=!1;ngOnInit(){this.fetchCategories()}ngOnDestroy(){this.categorySubscription&&this.categorySubscription.unsubscribe(),this.productSubscription&&this.productSubscription.unsubscribe()}fetchCategories(){this.categorySubscription=this.categoryService.getCategories().subscribe({next:i=>{this.categories=i,this.loadProducts()},error:i=>{console.error("Error fetching categories:",i)}})}resetProductsAndPagination(){this.products=[],this.totalPages=0,this.currentPage=1}loadProducts(i=1,e=8,r=null){if(this.products=[],this.loading=!0,!r){this.productService.getProductsPagination(i,e).subscribe({next:n=>{this.products=n.products,this.totalPages=n.totalPages,this.currentPage=n.currentPage,this.loading=!1},error:n=>{this.loading=!1,console.error("Error fetching products:",n)}});return}this.loading=!0,this.productSubscription=this.productService.getProductsByCategoryWithPagination({categoryId:r},i,e).subscribe({next:n=>{this.products=n.products,this.totalPages=n.totalPages,this.currentPage=n.currentPage,this.loading=!1},error:n=>{this.loading=!1,console.error("Error fetching products:",n)}})}getProductsByCategory(i){this.selectedCategoryId=i,this.resetProductsAndPagination(),this.loadProducts(1,8,i),this.toggleSidebar()}loadAllProducts(){this.selectedCategoryId=null,this.resetProductsAndPagination(),this.loadProducts(1,8,null),this.toggleSidebar()}loadPage(i){i===this.currentPage||i<1||i>this.totalPages||this.loadProducts(i,8,this.selectedCategoryId)}toggleSidebar(){this.isSidebarOpen=!this.isSidebarOpen}getPageArray(){return Array(this.totalPages).fill(0).map((i,e)=>e+1)}onPageSelectChange(i){let e=+i.target.value;this.loadPage(e)}onSearch(){this.searchQuery.trim()?(this.resetProductsAndPagination(),this.searchProducts(this.searchQuery)):this.loadAllProducts()}searchProducts(i){this.productSubscription=this.productService.searchProductsByName(i).subscribe({next:e=>{this.products=e,this.totalPages=0,this.currentPage=1},error:e=>{console.error("Error searching products:",e)}})}static \u0275fac=function(e){return new(e||t)(w(Z),w(ee))};static \u0275cmp=T({type:t,selectors:[["app-our-products"]],standalone:!0,features:[j],decls:24,vars:10,consts:[["noCategories",""],[1,"btn","btn-success","toggle-btn","d-flex","align-items-center",2,"margin-right","15px",3,"click"],[1,"material-icons","me-2"],[1,"sidebar"],[1,"sidebar-content"],[1,"btn","btn-success","close-btn",2,"margin-top","10px",3,"click"],["class","list-group",4,"ngIf","ngIfElse"],[1,"container","mt-5",2,"padding-top","100px"],[1,"row","justify-content-between","align-items-center","mb-3"],[1,"col","d-flex","align-items-center"],["aria-label","Page navigation","class","me-3",4,"ngIf"],["class","me-3",4,"ngIf"],[1,"d-flex","ms-auto","align-items-center"],["type","text","placeholder","Search products...",1,"form-control","me-2",3,"ngModelChange","ngModel"],[1,"btn","btn-success",3,"click"],["class","d-flex justify-content-center my-5",4,"ngIf"],["class","text-center",4,"ngIf"],["class","row",4,"ngIf"],[1,"list-group"],[1,"list-group-item","category-item",3,"click"],["class","list-group-item category-item",3,"click",4,"ngFor","ngForOf"],["aria-label","Page navigation",1,"me-3"],[1,"pagination","mb-0"],[1,"page-item"],["aria-label","Previous",1,"page-link",3,"click"],["aria-hidden","true"],["class","page-item",3,"active",4,"ngFor","ngForOf"],["aria-label","Next",1,"page-link",3,"click"],[1,"page-link",3,"click"],[1,"me-3"],["for","pageSelect",1,"form-label","mb-0","me-2"],["id","pageSelect",1,"form-select","d-inline-block","w-auto",3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"d-flex","justify-content-center","my-5"],["role","status",1,"spinner-border","text-success"],[1,"visually-hidden"],[1,"text-center"],[1,"text-muted"],[1,"row"],["class","col-md-3 mb-4",4,"ngFor","ngForOf"],[1,"col-md-3","mb-4"],[1,"card","shadow",2,"min-height","400px"],[1,"card-img-top",3,"src","alt"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card-text","text-truncate"],[1,"d-flex"],[1,"btn","btn-outline-success","w-100","d-flex","justify-content-center","align-items-center",3,"routerLink"]],template:function(e,r){if(e&1){let n=_();M(0,"app-navbar"),o(1,"button",1),m("click",function(){return p(n),g(r.toggleSidebar())}),o(2,"span",2),s(3,"menu"),c(),s(4,` Categories
`),c(),o(5,"div",3)(6,"div",4)(7,"button",5),m("click",function(){return p(n),g(r.toggleSidebar())}),s(8,"X"),c(),f(9,oe,4,1,"ul",6),c()(),f(10,ce,2,0,"ng-template",null,0,R),o(12,"div",7)(13,"div",8)(14,"div",9),f(15,se,11,5,"nav",10)(16,de,5,2,"div",11),o(17,"div",12)(18,"input",13),V("ngModelChange",function(O){return p(n),I(r.searchQuery,O)||(r.searchQuery=O),g(O)}),c(),o(19,"button",14),m("click",function(){return p(n),g(r.onSearch())}),s(20,"Search"),c()()()(),f(21,ue,4,0,"div",15)(22,pe,3,0,"div",16)(23,me,2,1,"div",17),c()}if(e&2){let n=A(11);a(5),P("open",r.isSidebarOpen),a(4),l("ngIf",r.categories.length>0)("ngIfElse",n),a(6),l("ngIf",!r.searchQuery),a(),l("ngIf",!r.searchQuery),a(2),E("ngModel",r.searchQuery),a(3),l("ngIf",r.loading),a(),l("ngIf",!r.loading&&r.products.length===0),a(),l("ngIf",r.products.length>0&&!r.loading)}},dependencies:[G,C,W,L,z,Y,J,K,U,H,X,q,h,$],styles:[".sidebar[_ngcontent-%COMP%]{position:fixed;top:70px;left:-250px;width:250px;height:calc(100% - 70px);background-color:#000000b3;overflow-x:hidden;transition:all .3s ease-in-out;z-index:1000;color:#fff;padding:20px}.sidebar.open[_ngcontent-%COMP%]{left:0}.sidebar-content[_ngcontent-%COMP%]{display:flex;flex-direction:column}ul[_ngcontent-%COMP%]{list-style:none;padding:0}li[_ngcontent-%COMP%]{padding:10px;background-color:transparent;border:none;color:#fff}li[_ngcontent-%COMP%]:hover{background-color:#ffffff1a}.close-btn[_ngcontent-%COMP%]{align-self:flex-end;margin-bottom:20px}.toggle-btn[_ngcontent-%COMP%]{margin-top:20px;position:fixed;top:80px;z-index:1100;left:20px}.btn-success.close-btn[_ngcontent-%COMP%]{background-color:gray;color:#fff;border:none;border-radius:50%;width:30px;height:30px;text-align:center;line-height:22px;font-size:16px;padding:0;margin-top:5px}.sidebar[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]{border-bottom:1px solid white;color:#fff;padding:10px 0}.sidebar[_ngcontent-%COMP%]   .category-item[_ngcontent-%COMP%]:last-child{border-bottom:none}.btn-outline-success[_ngcontent-%COMP%]{border:2px solid #28a745;color:#28a745;transition:background-color .3s ease}.btn-outline-success[_ngcontent-%COMP%]:hover{background-color:#28a745;color:#fff}.pagination[_ngcontent-%COMP%]   .page-item.active[_ngcontent-%COMP%]   .page-link[_ngcontent-%COMP%]{background-color:#28a745;border-color:#28a745;color:#fff}.form-select[_ngcontent-%COMP%]{color:#28a745}.form-select[_ngcontent-%COMP%]   option[_ngcontent-%COMP%]:checked{background-color:#28a745;color:#fff}[_ngcontent-%COMP%]::selection{background-color:#5c615c;color:#fff}"]})};var fe=[{path:"",component:y}],S=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=v({type:t});static \u0275inj=x({imports:[h.forChild(fe),h]})};var ie=class t{static \u0275fac=function(e){return new(e||t)};static \u0275mod=v({type:t});static \u0275inj=x({imports:[C,S]})};export{ie as OurProductsModule};
